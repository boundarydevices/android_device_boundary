ifeq ($(BOARD_HAVE_PREBOOTIMAGE),true)
INSTALLED_PREBOOTIMAGE_TARGET := $(PRODUCT_OUT)/preboot.img
PREBOOT_BINARY_PATHS := $(HOST_OUT_EXECUTABLES)
$(INSTALLED_PREBOOTIMAGE_TARGET): $(MKEXTUSERIMG) $(BOOTSCRIPT_TARGET) $(UPGRADE_TARGET) $(shell find $(PRODUCT_OUT)/preboot/ -type f)
	$(call pretty,"Target preboot image: $@")
	PATH=$(PREBOOT_BINARY_PATHS):$$PATH $(MKEXTUSERIMG) $(INTERNAL_USERIMAGES_SPARSE_EXT_FLAG) $(PRODUCT_OUT)/preboot $@ ext4 preboot $(BOARD_PREBOOTIMAGE_PARTITION_SIZE) -L preboot

.PHONY: preboot
preboot: $(INSTALLED_PREBOOTIMAGE_TARGET)

droidcore: preboot
bootimage: preboot
endif
